# 8. Тестирование

Тестирование — неотъемлемая часть процесса разработки в AIRBRO Business. Оно помогает обеспечить стабильность, надежность и предсказуемость работы приложения.

## Стратегия тестирования

Мы используем многоуровневый подход к тестированию, вдохновленный "пирамидой тестирования".

### 1. Юнит-тесты и Интеграционные тесты (Unit & Integration Tests)

Это основной и самый многочисленный вид тестов в проекте.

- **Инструменты:**
  - [Vitest](https://vitest.dev/): Современный и быстрый фреймворк для тестирования, совместимый с Vite.
  - [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/): Библиотека для тестирования React-компонентов, которая поощряет написание тестов, ориентированных на пользователя.
  - [JSDOM](https://github.com/jsdom/jsdom): Эмулирует окружение браузера в Node.js для запуска тестов.

- **Что мы тестируем:**
  - **Отдельные функции (юнит-тесты):** Тестирование вспомогательных функций и утилит (например, форматирование даты, валидаторы).
  - **React-компоненты:** Проверка, что компоненты корректно рендерятся в зависимости от пропсов, отображают нужные данные и правильно реагируют на действия пользователя (клики, ввод текста).
  - **React-хуки:** Тестирование кастомных хуков и их логики.
  - **Взаимодействие компонентов (интеграционные тесты):** Проверка, что несколько компонентов работают вместе как единое целое (например, форма с полями ввода и кнопкой отправки).

- **Как запускать тесты:**
  - **Один раз:**
    ```bash
    npm run test
    ```
  - **В режиме наблюдения (watch mode):** Тесты будут автоматически перезапускаться при изменении файлов.
    ```bash
    npm run test:watch
    ```
  - **С UI и отчетом о покрытии:**
    ```bash
    npm run test:ui
    npm run test:coverage
    ```

### 2. End-to-End (E2E) тесты

Эти тесты проверяют всю систему целиком, имитируя действия реального пользователя в настоящем браузере.

- **Инструмент:** [Playwright](https://playwright.dev/)

- **Что мы тестируем:**
  - Ключевые пользовательские сценарии, такие как:
    - Регистрация и вход пользователя.
    - Просмотр списка продуктов и добавление в корзину.
    - Процесс оплаты.
    - Навигация по личному кабинету.

- **Статус:**
  - На данный момент E2E-тесты **отключены** в CI/CD пайплайне (`ci.yml`) для ускорения проверок. Их следует запускать локально перед внесением значительных изменений в ключевую функциональность.

- **Как запускать E2E-тесты:**
  1.  **Установите браузеры Playwright:**
      ```bash
      npx playwright install --with-deps
      ```
  2.  **Запустите тесты:**
      ```bash
      npm run test:e2e
      ```

### 3. Статический анализ

Хотя это не тестирование в классическом понимании, статический анализ является важной частью нашей стратегии качества.

- **Инструменты:** ESLint, Prettier, TypeScript.
- **Что проверяется:**
  - Соблюдение единого стиля кода.
  - Отсутствие синтаксических ошибок.
  - Отсутствие ошибок типизации.
- **Когда запускается:** Автоматически при каждом коммите (с помощью `lint-staged` и `husky`), а также в CI/CD пайплайне.

---

На этом создание основной документации завершено.
